<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STReam Project | Top</title>
    <link rel="stylesheet" href="Styles/default.css">
</head>
<body class="opening-active"> <!-- ロゴ表示中はスクロール禁止クラスを初期付与 -->

    <!-- オープニングロゴ画面 (追加) -->
    <div id="opening-overlay" style="display: none;">
        <div class="opening-logo">
            <!-- ここを <img> タグに置き換えることも可能 -->
            STReam
        </div>
    </div>

    <header id="header-area">
        <div id="header-content-wrapper">
            <div id="site-name">
                <a href="#">
                    <h1 id="site-title">STReam Project</h1>
                </a>
            </div>
            <nav id="top-menu">
                <div id="top-menu-nav">
                    <div class="nav-item"><a href="#">Home</a></div>
                    <div class="nav-item"><a href="#news-section">News</a></div>
                    
                    <!-- Aboutメガメニュー実装部分 -->
                    <div class="nav-item">
                        <a href="#about-section">About ▾</a>
                        <div class="mega-menu">
                            <div class="mega-menu-content">
                                <div class="mega-column">
                                    <h3>Project Vision</h3>
                                    <ul>
                                        <li><a href="#">STReamについて<span>私たちのミッションとコアバリュー</span></a></li>
                                        <li><a href="#">ビジョン 2030<span>10年後のソフトテニスの未来予想図</span></a></li>
                                        <li><a href="#">プロジェクトメンバー<span>志を共にするチームの紹介</span></a></li>
                                    </ul>
                                </div>
                                <div class="mega-column">
                                    <h3>Core Initiatives</h3>
                                    <ul>
                                        <li><a href="#">新ルールの開発<span>観客を魅了する新しい競技フォーマット</span></a></li>
                                        <li><a href="#">メディアプラットフォーム<span>世界へ届ける発信力の拠点構築</span></a></li>
                                        <li><a href="#">選手連盟（Player Union）<span>アスリートの権利と未来を守る組織</span></a></li>
                                    </ul>
                                </div>
                                <div class="mega-column">
                                    <h3>Resources</h3>
                                    <ul>
                                        <li><a href="#">プレスリリース<span>最新の公式発表および資料アーカイブ</span></a></li>
                                        <li><a href="#">ブランドガイドライン<span>ロゴやフォントの利用規定について</span></a></li>
                                        <li><a href="#">ロードマップ<span>これまでの歩みとこれからの挑戦</span></a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="nav-item"><a href="#roadmap-section">Roadmap</a></div>
                    <div class="nav-item"><a href="#">Contact</a></div>
                </div>
            </nav>
        </div>
    </header>

    <!-- ==========================================CONTENTS====================================================- -->



    <!-- ======================================================================================================- -->

    <footer id="footer">
        <div id="footer-content">
            <table id="footer-links-contents">
                <thead>
                    <tr>
                        <th>STReam Project</th>
                        <th>Links</th>
                        <th>Legal</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><a href="#">About Vision</a></td>
                        <td><a href="#">SNS (Twitter)</a></td>
                        <td><a href="#">Privacy Policy</a></td>
                    </tr>
                    <tr>
                        <td><a href="#">Roadmap</a></td>
                        <td><a href="#">Instagram</a></td>
                        <td><a href="#">Terms of Service</a></td>
                    </tr>
                    <tr>
                        <td><a href="#">Join us</a></td>
                        <td><a href="#">Contact</a></td>
                        <td><a href="#">Copyright</a></td>
                    </tr>
                </tbody>
            </table>
            <hr>
            <div id="footer-bottom">
                <div id="site-title" style="font-size: 1.2rem;">STReam</div>
                <small id="copyright">© 2025 STReam Project, Cemlo All rights reserved.</small>
                <p class="ai-credit">
                    このウェブサイトは生成AIを活用してデザインされました。<br>STReamは、今後も信頼性と効率性を両立した生成AIの使い方を追求して参ります。
                </p>
            </div>
        </div>
    </footer>

    <script>
        // --- オープニング制御ロジック (追加) ---
        function handleOpeningAnimation() {
            const overlay = document.getElementById('opening-overlay');
            const body = document.body;
            
            // リファラ（遷移元）を取得
            const referrer = document.referrer;
            const currentHostname = window.location.hostname;
            
            // 判定：リファラが空、もしくはホスト名が異なる場合に表示
            let showOpening = false;
            if (!referrer) {
                showOpening = true; // 直接入力・ブックマーク
            } else {
                const referrerUrl = new URL(referrer);
                if (referrerUrl.hostname !== currentHostname) {
                    showOpening = true; // 別サイトからの流入
                }
            }

            if (showOpening) {
                overlay.style.display = 'flex';
                // 3秒後にフェードアウト開始
                setTimeout(() => {
                    overlay.style.opacity = '0';
                    setTimeout(() => {
                        overlay.style.visibility = 'hidden';
                        body.classList.remove('opening-active');
                    }, 800);
                }, 2500);
            } else {
                // 同じドメイン内の場合は即座に非表示
                overlay.style.display = 'none';
                body.classList.remove('opening-active');
            }
        }

        const state = {};

        function initSlideshow(id) {
            const container = document.getElementById(id);
            if (!container) return;

            const slides = container.querySelectorAll('.slide');
            const slideCount = slides.length;
            
            const showControlsParam = container.getAttribute('data-controls') !== 'false';
            const shouldShowControls = showControlsParam && slideCount > 1;

            if (!shouldShowControls) {
                container.classList.add('hide-controls');
            }

            const dotsContainer = container.querySelector('.slideshow-dots');
            if (dotsContainer && shouldShowControls) {
                dotsContainer.innerHTML = ''; 
                for (let i = 0; i < slideCount; i++) {
                    const dot = document.createElement('div');
                    dot.className = 'dot' + (i === 0 ? ' active' : '');
                    dot.onclick = () => goToSlide(id, i);
                    dotsContainer.appendChild(dot);
                }
            }

            const wrapper = container.querySelector('.slideshow-wrapper');
            wrapper.style.width = (slideCount * 100) + '%';
            slides.forEach(s => s.style.width = (100 / slideCount) + '%');

            state[id] = {
                current: 0,
                count: slideCount,
                timer: null,
                progress: 0,
                duration: 5000,
                active: shouldShowControls
            };

            if (shouldShowControls) resetTimer(id);
            updateVisuals(id);
        }

        function goToSlide(id, index) {
            const s = state[id];
            if (!s) return;
            
            s.current = (index + s.count) % s.count;
            updateVisuals(id);
            s.progress = 0;
            if (s.active) resetTimer(id);
        }

        function updateVisuals(id) {
            const s = state[id];
            const container = document.getElementById(id);
            const wrapper = container.querySelector('.slideshow-wrapper');
            const dots = container.querySelectorAll('.dot');
            const slides = container.querySelectorAll('.slide');
            
            const offset = s.current * (100 / s.count);
            wrapper.style.transform = `translateX(-${offset}%)`;
            
            dots.forEach((dot, i) => dot.classList.toggle('active', i === s.current));
            
            slides.forEach((slide, i) => {
                const cap = slide.querySelector('.slide-caption');
                if (cap) {
                    if (i === s.current) {
                        cap.style.opacity = '1';
                        cap.style.transform = 'translateY(0)';
                    } else {
                        cap.style.opacity = '0';
                        cap.style.transform = 'translateY(20px)';
                    }
                }
            });
        }

        function moveSlide(id, step) {
            if (state[id]) goToSlide(id, state[id].current + step);
        }

        function resetTimer(id) {
            if (state[id].timer) clearInterval(state[id].timer);
            state[id].timer = setInterval(() => {
                const container = document.getElementById(id);
                if (container && !container.matches(':hover')) {
                    state[id].progress += 1;
                    const bar = container.querySelector('.slide-progress');
                    if (bar) bar.style.width = `${state[id].progress}%`;
                    
                    if (state[id].progress >= 100) {
                        moveSlide(id, 1);
                    }
                }
            }, state[id].duration / 100);
        }

        window.onload = function() {
            // オープニングアニメーションの実行
            handleOpeningAnimation();
            
            // スライドショーの初期化
            document.querySelectorAll('.slideshow-container').forEach(el => initSlideshow(el.id));
        };
    </script>
</body>
</html>